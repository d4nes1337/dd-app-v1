<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>DD App</title>
  <script type="text/javascript">
    // GitHub Pages SPA redirect script
    // Based on https://github.com/rafgraph/spa-github-pages
    (function() {
      // Single Page Apps for GitHub Pages
      
      // This script takes the current URL and converts the path and query
      // string into just a query string, and then redirects the browser
      // to the new URL with only a query string and hash fragment
      
      // If you're creating a Project Pages site and NOT using a custom domain,
      // then set segmentsToKeep to 1 (enterprise users may need to set this to 2)
      var segmentsToKeep = 1;
      
      var l = window.location;
      var origin = l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '');
      var basePathname = l.pathname.split('/').slice(0, 1 + segmentsToKeep).join('/');
      
      // Always ensure we have the dd-app-v1 directory in the path - but only once
      if (!basePathname.endsWith('dd-app-v1/')) {
        if (basePathname.endsWith('/')) {
          basePathname = basePathname + 'dd-app-v1/';
        } else {
          basePathname = basePathname + '/dd-app-v1/';
        }
      }
      
      // Extract the path after the base pathname, avoiding any duplicates
      var path = '';
      if (l.pathname.indexOf(basePathname) === 0) {
        // If the pathname starts with the basePathname, extract what comes after
        path = l.pathname.slice(basePathname.length);
      } else {
        // Otherwise check if we have dd-app-v1 duplicated in the path
        var pathParts = l.pathname.split('/');
        var ddAppIndex = -1;
        
        // Find the first occurrence of dd-app-v1
        for (var i = 0; i < pathParts.length; i++) {
          if (pathParts[i] === 'dd-app-v1') {
            ddAppIndex = i;
            break;
          }
        }
        
        // If we found dd-app-v1, take everything after it
        if (ddAppIndex >= 0 && ddAppIndex + 1 < pathParts.length) {
          path = pathParts.slice(ddAppIndex + 1).join('/');
        } else {
          // Otherwise use the whole path except the first segment
          path = pathParts.slice(segmentsToKeep).join('/');
        }
      }
      
      // Remove any leading slashes from the path
      path = path.replace(/^\/+/, '');
      
      // Build the redirect URL
      var redirectUrl = origin + basePathname + 
                      (path ? '?' + 'path=' + path : '') +
                      (l.search ? (path ? '&' : '?') + l.search.slice(1) : '') +
                      l.hash;
                      
      console.log("404 redirect to:", redirectUrl);
      l.replace(redirectUrl);
    })();
  </script>
</head>
<body style="background-color: #232730; margin: 0; padding: 0; height: 100vh; display: flex; justify-content: center; align-items: center;">
  <h2 style="font-family: Helvetica, Arial, sans-serif; color: white; text-align: center; background-color: #232730; padding: 50px;">
    Redirecting to DD App...
  </h2>
</body>
</html> 